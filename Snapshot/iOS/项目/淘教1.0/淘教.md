## 淘教 1.0

### 一、Q

1.正确的对象初始化姿势是什么？

2.UITableViewCell的正确自定义方式是什么？

3.视图如何正确的从controller当中获取数据？

4.pch文件当中能否引入过多的头文件？pch的原理是什么？

5.详细了解类别和类扩展和协议的原理。

6.了解通知的机制。

7.UserInfoManager当中写的getter方法为什么不能获取_userInfo实例变量？



### 二、关于架构

1.网络请求代码到底应该放在那里。

2.model的notification怎样才能抽象到框架层去做。

#### 重点重构对象：

SubscribeDetailRecordTableViewCell

HomeViewController 利用适配器模式进行重构



### 三、TODO

#### 3.1 iOS手机端

- [ ] 界面跳转间的接口调用时，界面的显示更友好。

- [x] LZThumbnail的动态计算item的宽的和高度，现在是写死的。

- [x] 将所有的cell都继承自base。

- [ ] iphoneX的适配，现在底部会有一部分白色。

- [x] 将判断是教师还是助教的区分代码替换为宏。

- [x] 更换手机登录的时候，回调调用的是requestFailed，期望的结果是：报token失效。

- [ ] >  -----问题：AFNetworking 内部解析JSON失败。

- [ ] 导航进入第三页之后，第二页的手势返回失效。

- [x]  tableview的下拉刷新。

- [x] 消息图片需要显示未读消息数量。

- [x]  回复消息的时候需要改变成微信回复消息的那种样式。--- 暂时做成弹窗

- [x]  签到界面更改交互方式，签到的情况下，已选中的进行签到操作，未选中的进行请假操作。请假的情况下，就只是请假操作。

- [ ] 登录接口现在能够获取到用户头像。

- [x]  键盘上的Done改成“完成”。

- [x] 气泡的尺寸计算问题。

- [ ] 首页用于标识课程是否已完成的字段现在返回的有问题。

- [ ] 按时间顺序让用户开始上课。

- [x] 若今日课程都已经过了应该过的时间，老师还没有点击结课，需要发送一条本地通知，提醒老师去APP点击结课。



#### 3.2 Server

1. 登录接口逻辑更改。

2. 验证码登录。

3. 加操作日志。

4. 提交一条已读消息，会将所有的消息都更新为已读。



### 四、服务器地址

<http://localhost:8080/api/v1/at>

http://www.suntec-info.com/apiServer/



### 五、相关逻辑

未开始

	已拨打
	
	未拨打

已签约 （按月进行筛选）

再次试听（按月进行筛选）

已结束（按月进行筛选）



#### 1. 用户登录逻辑

	app launch  进行自动登录
	
	自动登录成功，设置uuid
	
	自动登录不成功，uuid为空
	
	HomeViewController
	
		UserInfoManager 判断是否已经登录
	
			已登录，不作为
	
			未登录，弹出登录页

\-----------------------------------

进入App首先获取UserDefault当中的token

	若token存在，无需登录，直接进入首页，调用获取首页的接口，若token无效，清空本地token，弹出登录页，重新登录，获取新的token。
	
	若toke不存在，弹出登录页，进行登录，获取token，并且存储在本地。

测试：

	对日历控件进行性能测试。



### 六、FIXME 标签

AC 代表架构上可能会有缺陷



### 七、LaunchImage

1242x2688 -XS MAX
828x1792  - XR
1125x2436  - X or XS
1242-2208 Retina HD 5.5
750x1334 Retina HD 4.7



### 



